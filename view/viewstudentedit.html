<?php
	include("common/header.php");
?>
<html>
<head>
	<title>Edit</title>
	<link rel="stylesheet" href="view/css/studentinsertstyle.css">
	<script>
		function verify(){
			let password=document.getElementById("password").value;
			let p='w@123';
			let pattern1=/[a-z]/g;
			let pattern2=/[0-9]/g;
			let pattern3=/[!@#$&*]/g;
			let pattern4=/[A-Z]/g;
			let pattern=/^[a-zA-Z0-9!@#$&*]{6,16}$/;
			console.log(pattern.test(password));
			if(password.length>5){
				console.log("length matched");
				let g=pattern.test(password);
				console.log(g);
				if(pattern1.test(password)){
					console.log("pattern1 true");
					if(pattern2.test(password)){
						console.log("pattern2 true");
						if(pattern3.test(password)){
							console.log("pattern3 true");
							if(pattern4.test(password)){
								console.log("pattern4 true");
								return true;
							}
							else{
								document.getElementById("errordisp").innerHTML="Password must have caps values";
								return false;
							}
						}
						else{
							document.getElementById("errordisp").innerHTML="Password must have special symbols";
							return false;
						}
					}
					else
						document.getElementById("errordisp").innerHTML="Password must have digits";
						return false;
				}
				else{
					document.getElementById("errordisp").innerHTML="Password must have characters";
					return false;
				}
			}
			else{
				document.getElementById("errordisp").innerHTML="Password length must be greater than 5";
				return false;
				
			}
			
		}
	</script>
</head>
<body>
	<div class='form'>
		<h1>EDIT <span><?php echo $resultset[0]['fname'];?><span></h1>
		<div class='image'>
			<img src="<?php echo $resultset[0]['photo_location']?>" class='img'>
		</div>
		<form action="index.php?mod=student&view=studentupdate&operation=update&id=<?php echo $_GET['id']?>" method=post onsubmit="return verify()" enctype="multipart/form-data">
			<label>First Name:</label><br><br>
			<input type="text" name="fname" class="click" value="<?php echo $resultset[0]['fname']?>" required><br><br>
			<label>Last Name:</label><br><br>
			<input type="text" name="lname" class="click" value="<?php echo $resultset[0]['lname'] ?>" required><br><br>
			<label>DOB:</label><br><br>
			<input type="date" name="dob" class="click" value="<?php echo $resultset[0]['dob'] ?>" required><br><br>
			<label>Department:</label><br><br>
			<input type="text" name="dept" class="click" value="<?php echo $resultset[0]['dept'] ?>" required><br><br>
			<label>Email:</label><br><br>
			<input type="email" name="email" class="click" value="<?php echo $resultset[0]['email'] ?>" required><br><br>
			<label>Password:</label><br><br>
			<input type="password" name="password" id="password" class="click" value="<?php echo base64_decode($resultset[0]['password']) ?>" required><br><br>
			<span id="errordisp"></span><br>
			<label>Photo :</label><br><br>
			<input type="file" name="photo_location" value="<?php echo $resultset[0]['photo_location'] ?>" class="click" required><br><br>
			<input type="submit">
		</form>
	</div>
</body>
</html>